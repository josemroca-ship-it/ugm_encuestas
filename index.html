<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portal UGM - Evaluación Docente</title>
    <!-- Carga de Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Configuración de fuente Inter para una apariencia moderna */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #eef2f5; /* Fondo más claro y moderno */
        }
        /* Estilos específicos para el botón principal con hover */
        .survey-card {
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
        }
        .survey-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        /* Estilos para el modal */
        #survey-modal {
            /* Controlamos la opacidad para una transición suave del fondo */
            opacity: 0;
            pointer-events: none; /* Permite clics a través del modal cuando está oculto/invisible */
        }
        #survey-modal.active {
            opacity: 1;
            pointer-events: auto; /* Bloquea clics al contenido detrás cuando está activo */
        }
        #modal-content-container {
            /* Inicialmente escalado y transparente para el efecto de entrada */
            transform: scale(0.95);
            opacity: 0;
            transition: transform 0.3s ease-out, opacity 0.3s ease-out;
        }
        #survey-modal.active #modal-content-container {
            /* Estado final del efecto de entrada */
            transform: scale(1);
            opacity: 1;
        }
    </style>
</head>
<body>

    <!-- Cabecera del Portal (Estilo Institucional Mejorado) -->
    <!-- Usamos indigo-900 para un azul oscuro institucional -->
    <header class="bg-indigo-900 shadow-xl sticky top-0 z-10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
            <!-- Logo UGM (Imagen) -->
            <img 
                src="https://upload.wikimedia.org/wikipedia/commons/0/0e/Logo_ugm.png" 
                alt="Logo UGM" 
                class="h-10" 
                onerror="this.onerror=null; this.src='https://placehold.co/150x40/0d47a1/ffffff?text=UGM+Logo+Error';"
            >

            <!-- Información del Usuario Logueado -->
            <div class="flex items-center space-x-3 text-white">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-yellow-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                <span class="text-sm font-semibold">
                    Bienvenido, Jose Maria Roca
                </span>
                <!-- Usamos yellow-500 como acento para el botón de cerrar sesión -->
                <button class="ml-4 text-sm text-yellow-500 hover:text-white transition duration-150 ease-in-out">
                    Cerrar Sesión
                </button>
            </div>
        </div>
    </header>

    <!-- Contenido Principal -->
    <main class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
        
        <!-- Título principal con línea de acento amarillo -->
        <h1 class="text-3xl font-extrabold text-gray-900 mb-8 border-b-4 border-yellow-500 pb-3">
            Panel Principal del Alumno
        </h1>

        <p class="text-gray-600 mb-8">
            Aquí podrás acceder a tus servicios académicos, calificaciones y encuestas pendientes.
        </p>

        <!-- Sección de Encuestas Pendientes (Acción Requerida - Color Rojo/Urgente) -->
        <div class="bg-white p-8 rounded-xl shadow-2xl border-l-8 border-red-600">
            <h2 class="text-2xl font-bold text-gray-800 mb-4 flex items-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3 text-red-600" viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.414 2.414a1 1 0 001.414-1.414L11 9.586V6z" clip-rule="evenodd" />
                </svg>
                Acciones Requeridas: Evaluación Docente
            </h2>
            <p class="text-lg text-gray-700 mb-6">
                Estimado Jose Maria Roca, tienes evaluaciones docentes pendientes para el periodo actual. Es **obligatorio** completar este proceso para acceder a tus calificaciones finales.
            </p>

            <!-- Tarjeta/Botón para Abrir la Encuesta (Llama a la función del modal) -->
            <div class="survey-card bg-red-50 hover:bg-red-100 p-6 rounded-lg border-2 border-red-300 transition" onclick="openSurveyModal()">
                <div class="flex items-center justify-between">
                    <div>
                        <h3 class="text-xl font-semibold text-red-800 mb-1">
                            Evaluar a tus Profesores
                        </h3>
                        <p class="text-red-700 text-sm">
                            Haga clic aquí para iniciar el portal de encuestas. Se abrirá en una ventana **embebida** en el portal.
                        </p>
                    </div>
                    <button class="flex items-center bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-6 rounded-lg shadow-md transition duration-150 ease-in-out">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z" />
                        </svg>
                        Ir a la Encuesta
                    </button>
                </div>
            </div>
        </div>

        <!-- Sección de Información Adicional (Simulada - Estilo UGM) -->
        <div class="mt-10 grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="bg-white p-6 rounded-xl shadow-md border-t-4 border-indigo-500 hover:shadow-lg transition">
                <h3 class="text-xl font-semibold text-indigo-800 mb-3">Mis Calificaciones</h3>
                <p class="text-gray-700">Revisa el estado de tus notas del semestre actual.</p>
                <button class="mt-4 text-indigo-600 hover:text-indigo-800 font-medium flex items-center">
                    Ver Historial Académico 
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-1" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M17 8l4 4m0 0l-4 4m4-4H3" /></svg>
                </button>
            </div>
            <div class="bg-white p-6 rounded-xl shadow-md border-t-4 border-yellow-500 hover:shadow-lg transition">
                <h3 class="text-xl font-semibold text-indigo-800 mb-3">Horario de Clases</h3>
                <p class="text-gray-700">Consulta tu horario actualizado y salones asignados.</p>
                <button class="mt-4 text-indigo-600 hover:text-indigo-800 font-medium flex items-center">
                    Descargar Horario 
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-1" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M17 8l4 4m0 0l-4 4m4-4H3" /></svg>
                </button>
            </div>
        </div>

    </main>
    
    <!-- Pie de página -->
    <footer class="bg-gray-200 mt-12 p-6 text-center text-gray-600 text-sm border-t border-gray-300">
        &copy; 2025 Universidad Gabriela Mistral (Simulación Demo). Todos los derechos reservados.
    </footer>

    <!-- Modal para Encuesta Embebida -->
    <div id="survey-modal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm transition-opacity duration-300">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-5xl h-[90vh] flex flex-col" id="modal-content-container">
            <!-- Modal Header -->
            <div class="flex justify-between items-center p-4 border-b border-indigo-200 bg-indigo-50 rounded-t-xl">
                <h3 class="text-xl font-bold text-indigo-800 flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2 text-yellow-500" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M7 3a1 1 0 000 2h6a1 1 0 100-2H7zM4 7a1 1 0 011-1h10a1 1 0 110 2H5a1 1 0 01-1-1zM6 14a1 1 0 00-1 1v2a1 1 0 102 0v-2a1 1 0 00-1-1zM15 14a1 1 0 00-1 1v2a1 1 0 102 0v-2a1 1 0 00-1-1zM4 10a1 1 0 000 2h12a1 1 0 100-2H4z" />
                    </svg>
                    Evaluación Docente Obligatoria
                </h3>
                <button onclick="closeSurveyModal()" class="text-gray-500 hover:text-red-600 transition p-1">
                    <!-- Icono para cerrar (X) -->
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <!-- Iframe de Contenido de la Encuesta -->
            <iframe id="survey-iframe" src="" class="flex-grow w-full border-0 rounded-b-xl" title="Portal de Encuestas UGM"></iframe>
        </div>
    </div>

    <!-- Script para Abrir/Cerrar el Modal -->
    <script>
        /**
         * Abre el modal de la encuesta, carga la URL en el iframe y aplica efectos de transición.
         */
        function openSurveyModal() {
            const modal = document.getElementById('survey-modal');
            const iframe = document.getElementById('survey-iframe');
            const url = 'https://ugmencuestas1.vercel.app/';

            // 1. Establecer la URL del iframe (carga el contenido)
            iframe.src = url;

            // 2. Mostrar el modal y activar las transiciones CSS
            modal.classList.remove('hidden');
            // Usamos un pequeño retraso para asegurar que las clases de transición se apliquen correctamente
            setTimeout(() => {
                modal.classList.add('active');
            }, 10); 

            // 3. Prevenir el desplazamiento del cuerpo principal mientras el modal está abierto
            document.body.style.overflow = 'hidden';
        }

        /**
         * Cierra el modal de la encuesta aplicando efectos de transición inversa.
         */
        function closeSurveyModal() {
            const modal = document.getElementById('survey-modal');

            // 1. Desactivar el estado 'active' para iniciar la transición de salida
            modal.classList.remove('active');
            
            // 2. Ocultar el modal después de que la transición CSS haya terminado (0.3s)
            setTimeout(() => {
                modal.classList.add('hidden');
                
                // 3. Resetear el iframe para detener cualquier contenido multimedia
                document.getElementById('survey-iframe').src = '';
                
                // 4. Restaurar el desplazamiento del cuerpo
                document.body.style.overflow = '';
            }, 300); 
        }
    </script>

</body>
</html>
